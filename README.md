# The Jungle
DSC80 Project 4

## Introduction

*The League of Legends dataset contains game information from pro League games in 2022. The question I seek to answer is this: Can we effectively predict the outcome of a match based on the Jungler's performance? This question is highly relevant to League of Legends in its current state: the jungle role has been repeatedly toned down by the developers, reaching a point where many players complain that the role feels underpowered, that junglers have much less impact on the game then they ought to, given the difficulty of the role. Despite these sentiments from many players, others argue that jungle is still a dominant role, which, by the very nature of not being confined to one area of the map (like every othe role), is inherently powerful and not in need of any tune ups from the developers. As League of Legends is an significnalty complicated game, answering this question with data offers much more promise of finding a convincing answer than the raging debates online.<br><br>The dataset I will use to answer this question has 148,992 rows, with groups of 12 rows corresponding to individual games, meaning the dataset convers 12,416 pro games from 2022. The columns of interest for my analysis are as follows: result (outcome of the game), kills (number of enemies slaim by the jungler), assists (number of enemies the jungler assisted in slaying, not counting their own kills), deaths (number of times the jungler died), dragons (number of dragons the team slew), heralds (number of rift heralds the team slew), firstbaron (whether the team slew the Baron Nashor first), and earned gpm (amount of gold the jungler earned per minute). Kills, assists, deaths, and gold per minute are all standard assessments of a player's performance in the game, regardless of role. Dragons, Heralds, and Baron Nashor are known as 'Epic Monsters', and provide a powerful teamwide boost when slain. Securing the kill on these monsters is one of the jungler's main jobs, and a good measure of their performance.*

## Data Cleaning and Exploratory Data Analysis

*To clean the data, I first isolated relevant columns for my analsyis. All columns mentioned above were included, along with several more that did not end up being used in the final model, such as vision score (a measure of how much a player contributed to gaining vision of obsured areas of the map) and total cs (a measure of how many minions and monsters a player slew, highly correlated with their gold per minute). I then imputed 0's for missing by design columns, specifically those columns pretaining to first blood, as a NaN simply means the player did not get the first kill in the game. Next, certain information such as dragons slain was only stored in two rows pertaining to each team in the game, so I merged these rows with the rows corresponding to individual players, so that all the relavent information is stored in one row. Next, I isolated the rows corresponding to junglers, as no other role's information is needed for the analysis. The resulting cleaned dataframe's head is presented below:<br><br><br>* *| gameid                | teamid                                   | position | gamelength | result | kills | assists | deaths | firstbloodkill | firstbloodassist | firstbloodvictim | firstdragon | dragons | firstherald | heralds | firstbaron | barons | visionscore | earned gpm | total cs |
|-----------------------|------------------------------------------|----------|------------|--------|-------|---------|--------|----------------|------------------|------------------|-------------|---------|-------------|---------|------------|--------|-------------|------------|----------|
| ESPORTSTMNT01_2690210 | oe:team:68911b3329146587617ab2973106e23 | jng      | 1713       | 0      | 2     | 6       | 5      | 0.0            | 1.0              | 0.0              | 0.0         | 1.0     | 1.0         | 2.0     | 0.0        | 0.0    | 48.0        | 188.0210   | 148.0    |
| ESPORTSTMNT01_2690210 | oe:team:d2dc3681437e2beb2bb4742477108ff | jng      | 1713       | 1      | 4     | 10      | 1      | 0.0            | 0.0              | 0.0              | 1.0         | 3.0     | 0.0         | 0.0     | 0.0        | 0.0    | 39.0        | 228.4764   | 183.0    |
| ESPORTSTMNT01_2690219 | oe:team:6dcacec00a6ba7576c5ab7f30c995cd | jng      | 2114       | 0      | 1     | 1       | 2      | 0.0            | 0.0              | 0.0              | 0.0         | 1.0     | 1.0         | 1.0     | 0.0        | 0.0    | 52.0        | 174.3803   | 215.0    |
| ESPORTSTMNT01_2690219 | oe:team:5380cdbc2ad2b8082624f48f99f6672 | jng      | 2114       | 1      | 6     | 7       | 0      | 1.0            | 0.0              | 0.0              | 1.0         | 4.0     | 0.0         | 1.0     | 1.0        |*

## Assessment of Missingness

*I do not believe any of the columns in my dataset are NMAR. Missing values primarilly occur in the teamid columns and the 'first' columns (firstblood, firstdragon, etc). In the case of teamid, it does not seem likely that team ids not being recorded has anything to do with the specific team in question in any systematic way, such as reporting errors or time pressure between games. As for the 'first' columns, inspection shows that it's quite typical for the values to be missing instead of 0 in this dataset, meaning they are MD<br><br>To investigate whether the missingness of teamid depends on other columns, I performed permutation tests with the results and the gamelength columns. The results test yielded a p-value of 0.076, which indicates that we fail to reject the null, that we do not think it likely that the missingness of teamid depends on result. The gamelength test yielded a p-value of 0.034, which is significant, indicating that we reject the null, and think it likely that gamelength is correlated with the missingness of teamid.*

## Hypothesis Testing

*I performed a Permutation test to assess whether or not assists are linked to the result of the match. The null hypothesis is The mean number of assists for junglers is the same for both winning and losing teams. The alternative hypothesis is The mean number of assists for junglers on winning teams is significantly different from that of junglers on losing teams. The test statistic used is difference in means, with a significance level of 0.05. The resulting p-value, after rounding, reads off as 0.0, indicating that we reject the null.*

## Framing a Prediction Problem

*The question I want to answer with my predictive model is the same as in the introduction: predicting the outcome of a match based on the jungler's performance. This is a Binary Classification problem. The chosen Reponse variable is the result, as it is exactly what we're trying to predict. I use F1 score as my evaluation metric, to acount for potential imbalances in the dataset.*

## Baseline Model

*The initial model I chose was logistic regression, as it's a simple classification model with interpretable coefficients. The model uses three quantitative features: Kills, Assists, and Deaths. These features are available during time of prediction, as they are determined during the game. The model had an F1 score of 0.88 on the test set. I believe the model is quite good, as it has a high F1 score, meaning it generalizes quite well to unseen data.*

## Final Model

*To improve my model, I chose the random forest model, as it's more powerful and likely to yield better results. I added the dragons, heralds, first baron, and earned gold per minute columns as features to the model, using One Hot Encoding to encode the nominal categorical variables of dragons, heralds, and first baron. I believe these features will improve the models F1 score as they are all critical to game success. Specifically, the number of dragons and heralds a team has is directly correlated with their power and gold income, which are fundmeental to the result. Further, slaying Baron Nashor is intended to enable a team to close out a game, so securing the first baron ought to be highly correlated with victory. I performed a grid search to optimize hyperparameters of max depth, min samples split, and n estimators. The optimal values found were 10, 5, and 100. The final F1 score on the test set was 0.91, which is higher than the F1 score of the baseline model, which I take to be a good improvement.*

## Fairness Analysis

*For the fairness analysis, group X was chosen to be those players in the LCK and LPL, namely the Korean and Chinese professional leagues respectively, while group Y was all other leagues. This is because the LCK and LPL typically dominate at the worlds level, and are generally considered to be the leagues with the highest skill. The evaluation metric chosen was precision, as I desired to test whether the model predicted true positives with any difference for high or low skill leagues. The Null hypothesis is that the model's precision is the same between the LCK / LPL and all other leagues. The alternative hypothesis is that the model's precision is significantly different between these two groups. The test was assessed at significance level 0.05, with a p-value of 0.25, indicating that we fail to reject the Null.*

